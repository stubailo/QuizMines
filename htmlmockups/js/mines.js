// Generated by CoffeeScript 1.3.3
(function() {
  var move, render_board, server_url, update,
    _this = this;

  server_url = "http://localhost:5000";

  update = function() {
    return $.ajax({
      url: server_url,
      data: {
        x: 1,
        y: 1
      },
      success: render_board
    });
  };

  move = function(x, y) {
    return function() {
      return $.ajax({
        url: server_url,
        data: {
          x: x,
          y: y
        },
        success: render_board
      });
    };
  };

  render_board = function(data) {
    var board, item, new_button, row, table_cell, xpos, ypos, _i, _j, _len, _len1, _ref;
    board = $("#board_wrapper");
    board.html("");
    data = $.parseJSON(data);
    board.append("<table>");
    ypos = 0;
    _ref = data.state;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      row = _ref[_i];
      board.append("<tr>");
      xpos = 0;
      for (_j = 0, _len1 = row.length; _j < _len1; _j++) {
        item = row[_j];
        item = item === null ? " " : item;
        new_button = $("<button class='mine_button'>" + item + "</button>");
        new_button.click(move(ypos, xpos));
        table_cell = $("<td></td>");
        table_cell.append(new_button);
        board.append(table_cell);
        xpos += 1;
      }
      board.append("</tr>");
      ypos += 1;
    }
    return board.append("</table>");
  };

  $(function() {
    return update();
  });

}).call(this);
